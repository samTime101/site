<!DOCTYPE html>
<html>
<head>
  <title>Samip's Blog</title>
</head>
<body>
  <h1>Blog paradise</h1>

  <ul id="titles"></ul>
  <hr>
  <h2 id="content-title"></h2>
  <div id="content-body" style="white-space: pre-wrap;"></div>

  <script>
    fetch("https://samip.pythonanywhere.com/space/myblogs/")
      .then(res => res.json())
      .then(data => {
        data.folder.forEach(title => {
          const li = document.createElement('li');
          const a = document.createElement('a');
          a.href = "#";
          a.textContent = title;
          a.onclick = () => load(title);
          li.appendChild(a);
          document.getElementById('titles').appendChild(li);
        });
      });

    function load(title_data) {
      fetch("https://samip.pythonanywhere.com/space/myblogs/" + title_data)
        .then(res => res.json())
        .then(data => {
          const f = data.file;
          if (f.includes('<')) {
            const temp = document.createElement('div');
            temp.innerHTML = f;
            document.getElementById('content-title').textContent = temp.querySelector('h2')?.textContent || title_data;
            document.getElementById('content-body').innerHTML = temp.querySelector('p')?.innerHTML || "";
          } else {
            document.getElementById('content-title').textContent = title_data;
            document.getElementById('content-body').textContent = f;
          }
        });
    }
  </script>
</body>
</html>
